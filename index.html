<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale-1.0">
    <title>Galería de Videojuegos con Vue.js</title>
    <!-- Tailwind CSS para un diseño moderno y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Vue.js v2 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style>
        /* Estilos personalizados para un mejor aspecto */
        body {
            background-color: #1a202c; /* Fondo oscuro */
            color: #e2e8f0; /* Texto claro */
            font-family: 'Inter', sans-serif;
        }
        .card {
            background-color: #2d3748;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #4a5568;
        }
        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 15px -3px rgba(56, 189, 248, 0.1), 0 4px 6px -2px rgba(56, 189, 248, 0.08);
        }
        .card-image {
            height: 200px;
            object-fit: cover;
        }
        .rating-star {
            color: #facc15; /* yellow-400 */
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

    <div id="app" class="container mx-auto px-4 py-8">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-cyan-400 mb-2">Galería de Videojuegos</h1>
            <p class="text-lg text-gray-400">Que jugar antes de morir</p>
        </header>

        <!-- Mensaje de carga mientras se obtienen los datos -->
        <div v-if="loading" class="text-center py-10">
            <p class="text-2xl text-gray-400">Cargando juegos...</p>
        </div>
        
        <!-- Mensaje si no se ha introducido la API key -->
        <div v-if="!apiKey && !loading" class="text-center mt-8 p-6 bg-yellow-900 text-yellow-200 rounded-lg max-w-2xl mx-auto">
            <h3 class="font-bold text-xl mb-2">¡Atención! Se requiere una API Key</h3>
            <p>Para mostrar los juegos, necesitas una API key gratuita de RAWG.io.</p>
            <p class="mt-2">Por favor, edita el archivo <code class="bg-gray-700 p-1 rounded">index.html</code> en la sección de script y reemplaza <code class="bg-gray-700 p-1 rounded">'YOUR_API_KEY_HERE'</code> con tu clave.</p>
            <a href="https://rawg.io/apikey" target="_blank" class="inline-block mt-4 bg-yellow-500 text-gray-900 font-bold py-2 px-4 rounded-lg hover:bg-yellow-600 transition">Obtener una API Key</a>
        </div>


        <!-- Contenedor de la galería de juegos -->
        <main v-else-if="!loading && !error" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
            
            <!-- Tarjeta de Videojuego -->
            <div v-for="game in games" :key="game.id" class="card rounded-lg overflow-hidden shadow-lg flex flex-col">
                <img :src="game.background_image" :alt="'Imagen de ' + game.name" class="w-full card-image">
                
                <div class="p-4 flex-grow flex flex-col justify-between">
                    <div>
                        <h2 class="text-xl font-bold mb-2 text-white">{{ game.name }}</h2>
                        <p class="text-gray-400 text-sm mb-3">Lanzamiento: {{ game.released }}</p>
                    </div>
                    <div class="flex justify-between items-center text-sm">
                        <div class="flex items-center">
                            <span class="rating-star mr-1">★</span>
                            <span class="font-bold text-gray-200">{{ game.rating }} / 5</span>
                        </div>
                        <span class="text-gray-400">#{{ game.rating_top }} Top</span>
                    </div>
                </div>
            </div>

        </main>
        
        <!-- Controles de paginación -->
        <footer v-if="!loading && !error && apiKey" class="flex justify-center items-center mt-12 gap-4">
            <button @click="prevPage" :disabled="!prevPageUrl" 
                    class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:bg-gray-600 disabled:cursor-not-allowed">
                Anterior
            </button>
            <span class="text-lg text-gray-300 font-semibold">Página {{ currentPage }}</span>
            <button @click="nextPage" :disabled="!nextPageUrl"
                    class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg transition disabled:bg-gray-600 disabled:cursor-not-allowed">
                Siguiente
            </button>
        </footer>

        <!-- Mensaje de error si la API falla -->
        <div v-if="error" class="text-center mt-8 p-4 bg-red-900 text-red-200 rounded-lg">
            <p><strong>¡Oh, no!</strong> No se pudieron cargar los datos. Revisa tu API key o intenta de nuevo más tarde.</p>
        </div>
    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                games: [],
                loading: true,
                error: false,
                // --- IMPORTANTE ---
                // Reemplaza 'YOUR_API_KEY_HERE' con tu API key de RAWG.io
                apiKey: '6e2d7ca9de6c40028eea1cf141fe89fe', 
                pageSize: 20,
                currentPage: 1,
                nextPageUrl: null,
                prevPageUrl: null,
            },
            mounted() {
                // Solo intentar cargar si hay una API key
                if (this.apiKey) {
                    const initialUrl = `https://api.rawg.io/api/games?key=${this.apiKey}&page_size=${this.pageSize}`;
                    this.fetchGames(initialUrl);
                } else {
                    this.loading = false;
                }
            },
            methods: {
                fetchGames(url) {
                    this.loading = true;
                    this.error = false;
                    
                    fetch(url)
                        .then(response => {
                             if (!response.ok) { throw new Error('Network response was not ok'); }
                             return response.json();
                        })
                        .then(data => {
                            this.games = data.results;
                            this.nextPageUrl = data.next;
                            this.prevPageUrl = data.previous;
                            this.loading = false;
                            window.scrollTo(0, 0);
                        })
                        .catch(error => {
                            console.error('Hubo un problema con la operación fetch:', error);
                            this.loading = false;
                            this.error = true;
                        });
                },
                nextPage() {
                    if (this.nextPageUrl) {
                        this.currentPage++;
                        this.fetchGames(this.nextPageUrl);
                    }
                },
                prevPage() {
                    if (this.prevPageUrl) {
                        this.currentPage--;
                        this.fetchGames(this.prevPageUrl);
                    }
                }
            }
        });
    </script>

</body>
</html>

